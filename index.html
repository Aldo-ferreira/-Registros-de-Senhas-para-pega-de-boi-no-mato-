<!DOCTYPE html>

<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escolha de Números - Pega de Boi</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background-color: #f4f4f4; }
        input, button { padding: 5px; margin: 5px 0; }
        button { cursor: pointer; }
        .pago { color: green; font-weight: bold; }
        #listaWhatsApp { width: 100%; margin-top: 10px; }
        #listaWhatsApp textarea { width: 100%; height: 200px; }
    </style>
</head>
<body>
    <h1>Escolha de Números - Pega de Boi</h1>
    <h3>Cada número vale por um boi. Escolha seu número e registre seu nome!</h3>

```
<label for="numero">Número (1 a 200):</label>
<input type="number" id="numero" min="1" max="200" placeholder="Digite o número">
<label for="nome">Seu Nome:</label>
<input type="text" id="nome" placeholder="Digite seu nome">
<button onclick="registrar()">Registrar</button>

<h2>Verificar Disponibilidade de Número</h2>
<label for="verificarNumero">Escolha um número para verificar:</label>
<input type="number" id="verificarNumero" min="1" max="200" placeholder="Digite o número">
<button onclick="verificarDisponibilidade()">Verificar Disponibilidade</button>
<p id="statusNumero"></p>

<h2>Lista de Números Escolhidos</h2>
<table>
    <thead>
        <tr>
            <th>Número</th>
            <th>Nome</th>
            <th>Status</th>
            <th>Ações</th>
        </tr>
    </thead>
    <tbody id="tabela">
        <!-- Os números serão preenchidos aqui -->
    </tbody>
</table>

<button onclick="gerarLista()">Gerar Lista para WhatsApp</button>
<textarea id="listaWhatsApp" rows="10" cols="50" placeholder="Lista gerada aparecerá aqui..." readonly></textarea>
<button onclick="limparLista()">Limpar Lista</button>

<script>
    // Inicializa os dados de números, usando Local Storage
    const numeros = JSON.parse(localStorage.getItem('numeros')) || 
        Array.from({ length: 200 }, (_, i) => ({ numero: i + 1, nome: '', pago: false }));

    function atualizarTabela() {
        const tabela = document.getElementById('tabela');
        tabela.innerHTML = ''; // Limpa a tabela
        numeros.forEach(item => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${item.numero}</td>
                <td>${item.nome || 'Disponível'}</td>
                <td class="${item.pago ? 'pago' : ''}">${item.pago ? 'Pago' : (item.nome ? 'Pendente' : 'Disponível')}</td>
                <td>
                    ${item.nome ? `
                        <button onclick="marcarPago(${item.numero})">${item.pago ? 'Cancelar Pago' : 'Marcar Pago'}</button>
                        <button onclick="editar(${item.numero})">Editar</button>
                        <button onclick="disponibilizar(${item.numero})">Disponibilizar</button>
                    ` : ''}
                </td>
            `;
            tabela.appendChild(row);
        });

        // Salva os dados atualizados no Local Storage
        localStorage.setItem('numeros', JSON.stringify(numeros));
    }

    function registrar() {
        const numero = parseInt(document.getElementById('numero').value);
        const nome = document.getElementById('nome').value.trim();

        if (!numero || numero < 1 || numero > 200) {
            alert('Por favor, escolha um número válido entre 1 e 200.');
            return;
        }
        if (!nome) {
            alert('Por favor, insira seu nome.');
            return;
        }

        const index = numeros.findIndex(item => item.numero === numero);
        if (numeros[index].nome) {
            alert('Esse número já foi escolhido. Por favor, escolha outro.');
            return;
        }

        numeros[index].nome = nome;
        atualizarTabela();

        document.getElementById('numero').value = '';
        document.getElementById('nome').value = '';
    }

    function marcarPago(numero) {
        const index = numeros.findIndex(item => item.numero === numero);
        if (index >= 0) {
            numeros[index].pago = !numeros[index].pago;
            atualizarTabela();
        }
    }

    function editar(numero) {
        const index = numeros.findIndex(item => item.numero === numero);
        if (index >= 0) {
            const novoNome = prompt('Digite o novo nome:', numeros[index].nome);
            if (novoNome !== null) {
                numeros[index].nome = novoNome.trim();
                atualizarTabela();
            }
        }
    }

    function disponibilizar(numero) {
        const index = numeros.findIndex(item => item.numero === numero);
        if (index >= 0) {
            numeros[index].nome = '';
            numeros[index].pago = false;
            atualizarTabela();
        }
    }

    function verificarDisponibilidade() {
        const numero = parseInt(document.getElementById('verificarNumero').value);
        const statusElement = document.getElementById('statusNumero');
        if (!numero || numero < 1 || numero > 200) {
            statusElement.textContent = 'Por favor, escolha um número válido entre 1 e 200.';
            return;
        }

        const index = numeros.findIndex(item => item.numero === numero);
        if (index >= 0) {
            if (numeros[index].nome) {
                statusElement.textContent = `Número ${numero} já foi escolhido por ${numeros[index].nome}. Status de pagamento: ${numeros[index].pago ? 'Pago' : 'Pendente'}.`;
            } else {
                statusElement.textContent = `Número ${numero} está disponível.`;
            }
        }
    }

    function gerarLista() {
        const lista = [
            "Número | Nome | Status de Pagamento", // Cabeçalho da lista
            ...numeros
                .map(item => `${item.numero} | ${item.nome || 'Disponível'} | ${item.pago ? 'Pago' : (item.nome ? 'Pendente' : 'Disponível')}`)
        ].join('\n');
        document.getElementById('listaWhatsApp').value = lista;
    }

    function limparLista() {
        if (confirm('Tem certeza de que deseja limpar a lista?')) {
            // Limpa todos os dados
            localStorage.removeItem('numeros');
            // Reinicia a lista
            numeros.length = 0;
            Array.from({ length: 200 }, (_, i) => numeros.push({ numero: i + 1, nome: '', pago: false }));
            atualizarTabela();
            document.getElementById('listaWhatsApp').value = '';
        }
    }

    atualizarTabela();
</script>
```

</body>
</html>
